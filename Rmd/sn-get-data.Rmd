---
title: Getting Super Netball Data
author:
- Stephen E. Lane
output:
  html_document:
    toc: yes
    toc_depth: 2
    theme: yeti
    highlight: zenburn
    fig_caption: true
---

<!-- Time-stamp: <2018-03-30 19:22:22 (slane)> -->

```{r setup,echo=FALSE,warning=FALSE,message=FALSE,cache=FALSE,results="hide"}
knitr::opts_chunk$set(cache = FALSE, error = FALSE, warning = FALSE,
                      message = FALSE, echo = TRUE)
options(digits = 2)

```

# Introduction

Data are stored in 'https://mc.championdata.com/data/' under certain match and round id's. The 2017 home and away season is in the 10083 folder, and can be accessed using a GET request; this function will grab the whole list of data:

```{r get-data-function}
## cat(htmltools::includeText("../R/selectMatch.R"))
library(dplyr)
library(httr)
library(here)
source(here("R", "selectMatch.R"), echo = TRUE)
round1_game1 <- selectMatch("10083", 1, 1)
class(round1_game1)
names(round1_game1)

```

Final scores are in `teamStats`, quarter-by-quarter are in `teamPeriodStats`.

Let's grab it all now, and figure out how to process it soon...

```{r get-home-away}
for (i in seq_len(14)) {
    for (j in seq_len(4)) {
        data <- selectMatch("10083", i, j)
        saveRDS(data, file = here("data-raw",
                                  paste0("round_", i, "_game_", j, ".rds")))
    }
}

```

```{r get-finals}
data <- selectMatch("10084", 1, 1)
saveRDS(data, file = here("data-raw", "semifinal_1.rds"))
data <- selectMatch("10084", 1, 2)
saveRDS(data, file = here("data-raw", "semifinal_2.rds"))
data <- selectMatch("10084", 2, 1)
saveRDS(data, file = here("data-raw", "prelimfinal.rds"))
data <- selectMatch("10084", 3, 1)
saveRDS(data, file = here("data-raw", "grandfinal.rds"))

```

It will also be good to run all of this inside a docker container. I'm going to build upon the [rocker/verse:3.4.3](https://github.com/rocker-org/rocker-versioned) version for that. The dockerfile is located in the `docker/` directory. Once the selenium container is up and running, attach to it:
